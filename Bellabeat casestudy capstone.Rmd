---
title: "Bellabeat Case Study"
author: "Muskan Shokeen"
date: "2023-05-15"
output:
  pdf_document: default
  html_document: default
---

**Ask**

##About the company


###Questions for the analysis
Questions for the analysis
-What are some trends in smart device usage?
-How could these trends apply to Bellabeat customers?
-How could these trends help influence Bellabeat marketing strategy

##Business Task
The business task for the marketing analytics team at Bellabeat is to analyze smart device usage data related to Bellabeat products, identify trends and patterns, and provide high-level recommendations for how these trends can inform Bellabeat's marketing strategy. The goal is to gain insights into how customers are using smart devices to track their fitness and wellness, and to use these insights to inform future product development, advertising strategies, and overall marketing efforts.

##Key Stakeholders
The main stakeholders here are Urška Sršen, Bellabeat’s co-founder and Chief Creative Officer; Sando Mur, Mathematician and Bellabeat’s cofounder; And the rest of the Bellabeat marketing analytics team.


##Problem
The problem the marketing analytics team is trying to solve is to gain insights into how customers are using smart devices to track their fitness and wellness. By analyzing the available data, the team hopes to identify trends and patterns that could inform Bellabeat's marketing strategy and potentially unlock new growth opportunities for the company.


**Prepare**

Dataset Used: Fitbit Fitness Tracker Data
Data sourced from: https://www.kaggle.com/datasets/arashnic/fitbit

Data Content
This dataset generated by respondents to a distributed survey via Amazon Mechanical Turk between 03.12.2016-05.12.2016. Thirty eligible Fitbit users consented to the submission of personal tracker data, including minute-level output for physical activity, heart rate, and sleep monitoring. Individual reports can be parsed by export session ID (column A) or timestamp (column B). Variation between output represents use of different types of Fitbit trackers and individual tracking behaviors / preferences.

###Loading packages
```{r}
#Importing Libraries
library(tidyverse)
library(dplyr)
library(ggplot2)
library(lubridate)
library(tidyr)
```

###Importing Datasets
[FitBit Fitness Tracker Data](https://www.kaggle.com/datasets/arashnic/fitbit?resource=download)

```{r}
##Importing Data

dailyActivity <- read.csv("dailyActivity_merged.csv")
dailyCalories <- read.csv("dailyCalories_merged.csv")
dailyIntensities <- read.csv("dailyIntensities_merged.csv")
dailySteps <- read.csv("dailySteps_merged.csv")
sleep_Day <- read.csv("sleepDay_merged.csv")
weight_Log <- read.csv("weightLogInfo_merged.csv")
intensitieshourly <- read.csv("hourlyIntensities_merged.csv")
hourlysteps <- read.csv("hourlySteps_merged.csv")

```

### Checking the data
```{r}
head(dailyActivity)
view(dailyActivity)
head(dailyCalories)
view(dailyCalories)
head(dailyIntensities)
view(dailyIntensities)
str(dailySteps)
str(sleep_Day)
head(weight_Log)
str(weight_Log)
head(intensitieshourly)
str(hourlysteps)
```

### Fixing the Data

There seem to be some formatting issues with the Sleep_Day and Weight_log Dataset timestamps

The date in dailyCalories data set was formatted and edited using excel's text to column function and formating it in dd/mm/yyyy format


```{r}
sleep_Day$SleepDay=as.POSIXct(sleep_Day$SleepDay, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
sleep_Day$date <- format(sleep_Day$SleepDay, format = "%m/%d/%y")

weight_Log$Date=as.POSIXct(weight_Log$Date, format="%m/%d/%Y %I:%M:%S %p", tz=Sys.timezone())
weight_Log$Date <- format(weight_Log$Date, format = "%m/%d/%y")
```

###Exploring and analyzing data
```{r}
n_distinct(dailyActivity$Id)
n_distinct(dailyCalories$Id)
n_distinct(dailyIntensities$Id)
n_distinct(sleep_Day$Id)
n_distinct(weight_Log$Id)
```
We have 33 distinct participants in the dailyActivities, dailyCalories and dailyIntensities data
There are 24 participants in sleep_day and only 8 participants in the weight_log dataset. 8 participants will not be enough to provide any valuable recommendation or conclusions based on the dataset.

```{r}
# dailyActivities

dailyActivity %>%
  select(TotalSteps, TotalDistance, SedentaryMinutes, Calories) %>%
  filter(TotalSteps != 0, TotalDistance != 0, SedentaryMinutes != 0, Calories != 0) %>%
  summary()
#In the code above, the filter() function is used to exclude the rows where any of the columns "TotalSteps," "TotalDistance," "SedentaryMinutes," or "Calories" are equal to 0. This ensures that the summary only considers values that are not equal to 0.
```
##Interesting findings and analysis

TotalSteps:

The minimum recorded number of steps is 8, indicating that there are instances where very few steps were taken.
The median number of steps is 8054, while the mean is slightly higher at 8339, suggesting a slightly right-skewed distribution.
The maximum number of steps is 36019, indicating that some individuals recorded a significant number of steps.
TotalDistance:

The minimum recorded distance is 0.010, indicating that there are instances where very short distances were covered.
The median distance is 5.590, and the mean is slightly higher at 5.993, suggesting a slightly right-skewed distribution.
The maximum distance is 28.030, indicating that some individuals covered a substantial distance.
SedentaryMinutes:

The minimum recorded sedentary time is 2 minutes, indicating that there are instances where very little time was spent being sedentary.
The median sedentary time is 1021 minutes, and the mean is 956.3 minutes, suggesting a slightly left-skewed distribution.
The maximum recorded sedentary time is 1440 minutes, indicating that some individuals had no active minutes.
Calories:

The minimum recorded calorie count is 52, indicating that there are instances where very few calories were burned.
The median calorie count is 2221, and the mean is 2365, suggesting a slightly right-skewed distribution.
The maximum recorded calorie count is 4900, indicating that some individuals burned a significant number of calories.

```{r}
# Number of Active minutes as per different categories

dailyActivity %>% 
  select(VeryActiveMinutes, FairlyActiveMinutes, LightlyActiveMinutes, SedentaryMinutes) %>% 
  summary()

```
##Findings and analysis

VeryActiveMinutes:

The minimum recorded very active minutes is 0, indicating that there are instances where no very active minutes were recorded.
The median very active minutes is 4, while the mean is 21.16, suggesting a right-skewed distribution.
The maximum recorded very active minutes is 210, indicating that some individuals had a substantial amount of very active minutes.
FairlyActiveMinutes:

The minimum recorded fairly active minutes is 0, indicating that there are instances where no fairly active minutes were recorded.
The median fairly active minutes is 6, while the mean is 13.56, suggesting a right-skewed distribution.
The maximum recorded fairly active minutes is 143, indicating that some individuals had a considerable amount of fairly active minutes.
LightlyActiveMinutes:

The minimum recorded lightly active minutes is 0, indicating that there are instances where no lightly active minutes were recorded.
The median lightly active minutes is 199, while the mean is 192.8, suggesting a relatively balanced distribution.
The maximum recorded lightly active minutes is 518, indicating that some individuals had a significant amount of lightly active minutes.
SedentaryMinutes:

The minimum recorded sedentary minutes is 0, indicating that there are instances where no sedentary minutes were recorded.
The median sedentary minutes is 1057.5, while the mean is 991.2, suggesting a slightly left-skewed distribution.
The maximum recorded sedentary minutes is 1440, indicating that some individuals had no active minutes.
```{r}
# calories
dailyCalories %>%
  select(Calories) %>%
  summary()
```
This indicates that minimum calories are 0 which is highly unlikely and hence this is a missing value in the data set. We will be replacing the "0" value by the mean value using the following code chunk

```{r}
mean_calories <- mean(dailyCalories$Calories[dailyCalories$Calories != 0 & !is.na(dailyCalories$Calories)])
#The above code calculates the mean of the "Calories" column, excluding the "0" values and any null values.


updatedDailyCalories <- dailyCalories
#Create a new dataset by making a copy of the original dataset

updatedDailyCalories$Calories[is.na(updatedDailyCalories$Calories) | updatedDailyCalories$Calories == 0] <- mean_calories
#This code replaces any null values or "0" values in the "Calories" column of the new dataset with the calculated mean value.

#updated calories summary
updatedDailyCalories %>%
  select(Calories) %>%
  summary()

```
We have now transformed the data to reflect updated values.

##findings and analysis

Minimum Calorie Count: The minimum recorded calorie count is 52, indicating that there are instances where very few calories were burned or consumed.

Quartiles: The first quartile (25th percentile) is 1836, and the third quartile (75th percentile) is 2793. This means that 25% of the recorded calorie counts are below 1836, and 25% are above 2793. The interquartile range (IQR) is 957, which represents the range of the middle 50% of the data.

Median: The median calorie count is 2150, which represents the middle value in the dataset when arranged in ascending order. This indicates that 50% of the recorded calorie counts are below 2150.

Mean: The mean calorie count is 2313, which is the average of all recorded calorie counts. It provides an estimate of the central tendency of the data.

Maximum Calorie Count: The maximum recorded calorie count is 4900, indicating that some individuals burned or consumed a significant number of calories.

```{r}
# sleep
sleep_Day %>%
  select(TotalSleepRecords, TotalMinutesAsleep, TotalTimeInBed) %>%
  summary()
```
##findings and analysis

TotalSleepRecords:

The minimum value recorded for the number of sleep records is 1, indicating that there is at least one sleep record present in the dataset.
The first quartile (25th percentile), median, and third quartile (75th percentile) are all 1. This suggests that a vast majority of the records in the dataset contain only one sleep record.
The maximum value recorded for the number of sleep records is 3, indicating that there are instances where individuals have multiple sleep records.
TotalMinutesAsleep:

The minimum recorded value for the total minutes asleep is 58, indicating that there are instances where individuals slept for a very short duration.
The first quartile, median, and third quartile are 361, 433, and 490, respectively. This suggests that a significant portion of the dataset had individuals sleeping for durations ranging from 361 to 490 minutes.
The maximum recorded value for the total minutes asleep is 796, indicating that there are instances where individuals had longer sleep durations.
TotalTimeInBed:

The minimum recorded value for the total time spent in bed is 61, indicating that there are instances where individuals spent a very short time in bed.
The first quartile, median, and third quartile are 403, 463, and 526, respectively. This suggests that a significant portion of the dataset had individuals spending time in bed ranging from 403 to 526 minutes.
The maximum recorded value for the total time spent in bed is 961, indicating that there are instances where individuals had longer periods of time spent in bed.
```{r}
#Weight
weight_Log %>%
  select(WeightKg, BMI, Fat ) %>%
  summary()


colSums(is.na(weight_Log))


```
#Findings and summary
WeightKg:

The minimum weight recorded is 52.60 kg, and the maximum weight is 133.50 kg.
The average weight is 72.04 kg, with a standard deviation not available in the summary.
The first quartile (25th percentile) is 61.40 kg, and the third quartile (75th percentile) is 85.05 kg.
There are no missing values for the WeightKg variable.
BMI:

The minimum BMI recorded is 21.45, and the maximum BMI is 47.54.
The average BMI is 25.19, with a standard deviation not available in the summary.
The first quartile (25th percentile) is 23.96, and the third quartile (75th percentile) is 25.56.
There are no missing values for the BMI variable.
Fat:

The minimum value for the Fat variable is 22.00, and the maximum value is 25.00.
The average value for Fat is 23.50, with a standard deviation not available in the summary.
The first quartile (25th percentile) is 22.75, and the third quartile (75th percentile) is 24.25.
There are 65 missing values for the Fat variable.



##Merging Data

Remaining columns to match in both datasets
```{r}
library(dplyr)

# Rename "date" column in sleep_Day to "Date"
sleep_Day <- sleep_Day %>% rename(Date = date)

# Rename "ActivityDate" column in dailyActivity to "Date"
dailyActivity <- dailyActivity %>% rename(Date = ActivityDate)

```




```{r}

sleep_Day <- sleep_Day %>%
  mutate(Date = as.character(Date))

dailyActivity <- dailyActivity %>% 
  mutate(Date=as.character(Date))

merged_data <- inner_join(sleep_Day, dailyActivity, by = "Id")
head(merged_data)
```

##Visualization

```{r}
ggplot(data=dailyActivity, aes(x=TotalSteps, y=Calories)) + 
  geom_point() + geom_smooth() + labs(title="Total Steps vs. Calories")
```
##findings and analysis
It can be seen that there is a relationship between the number of calories a person consumes and the number of steps they walk in a day. Higher calorie consumption tends to be associated with more physical activity, as the body requires energy to support movement and exercise. This correlation can be leveraged to promote healthier habits and enhance the functionality of smartwatches.

To make bella beat smart device more usable and encourage a healthier lifestyle, one suggestion is to incorporate a nutrition tracking feature. By integrating a food tracking system into the smartwatch, users can easily log their daily calorie intake and receive real-time feedback on their energy balance. This feature can provide insights into their nutritional choices and help them make informed decisions about their diet.

The nutrition tracking feature could work in conjunction with the smartwatch's step tracking capabilities. It can automatically estimate the number of calories burned based on the user's activity level and compare it with their calorie intake. This information can be displayed on the smartwatch's interface, giving users a clear picture of their energy balance throughout the day.

Additionally, the smartwatch can provide personalized recommendations and reminders to help users maintain a healthy lifestyle. For instance, it could send notifications suggesting healthier food options or reminding users to engage in physical activity if they have been sedentary for a prolonged period.

By combining step tracking with nutrition monitoring, a smartwatch can offer a comprehensive approach to promoting wellness. It empowers users to make informed decisions about their diet and activity levels, ultimately contributing to better health and overall well-being.

In conclusion, integrating a nutrition tracking feature into a smartwatch can enhance its usability and encourage healthier habits. By providing insights into calorie intake and energy balance, along with personalized recommendations, the smartwatch becomes a valuable tool for individuals striving to maintain a balanced and active lifestyle.
```{r}
ggplot(data=sleep_Day, aes(x=TotalMinutesAsleep, y=TotalTimeInBed)) + 
  geom_point()+ labs(title="Total Minutes Asleep vs. Total Time in Bed")
```

We will not be visualizing the hourly intensity data over 24hours of the day. But first we will need to format and manipulate the AvtivityHour column since it is in <chr> format
```{r}

# Convert ActivityHour column to proper date and time format
intensitieshourly$ActivityHour <- as.POSIXct(intensitieshourly$ActivityHour, format = "%m/%d/%Y %I:%M:%S %p")

# Print the modified dataset
print(intensitieshourly)

# Create new columns for date and time
intensitieshourly$Date <- as.Date(format(intensitieshourly$ActivityHour, "%Y-%m-%d"))
intensitieshourly$Time <- format(intensitieshourly$ActivityHour, "%H:%M:%S")

# Create the histogram plot
ggplot(data = intensitieshourly, aes(x = Time, y = AverageIntensity)) +
  geom_bar(stat = "identity", fill = "pink") +
  theme(axis.text.x = element_text(angle = 90)) +
  labs(title = "Total Average Intensity vs. Time")


```


##Now lets look at relationship between total hours vs steps

```{r}

# Convert ActivityHour to proper date and time format
hourlysteps$ActivityHour <- as.POSIXct(hourlysteps$ActivityHour, format = "%m/%d/%Y %I:%M:%S %p")

# Extract the hour component
hourlysteps$Hour <- format(hourlysteps$ActivityHour, "%H:%M:%S")

# Calculate the average steps for each hour
averageSteps <- aggregate(StepTotal ~ Hour, data = hourlysteps, FUN = mean)

# Plot the histogram
ggplot(data = averageSteps, aes(x = Hour, y = StepTotal)) +
  geom_histogram(stat = "identity", fill = "darkblue") +
  labs(x = "Time", y = "Average Steps", title = "Average Steps vs Time") +
  theme(axis.text.x = element_text(angle = 90))

```
##findings and analysis

##findings and analysis

In the total average intensity graph and the average steps vs time graph, we can observe that the least intensities and steps are displayed during the hours of 22:00 to 05:00.

This pattern suggests that during the late evening and early morning hours, there is generally a decrease in activity or intensity. It aligns with the typical sleeping hours for most individuals. During this period, people tend to engage in less physical activity, leading to lower intensity levels.

Understanding this trend can have several implications. For example, it highlights the importance of getting adequate rest and sleep during these hours to maintain a healthy lifestyle. It also suggests that if one wants to engage in more intense activities or workouts, it may be more suitable to schedule them during the hours with higher average intensity levels.

From a practical standpoint, this information can be utilized in various ways. For instance, fitness enthusiasts or individuals aiming to increase their activity levels may find it beneficial to plan their exercise routines during the hours when the average intensity is higher. Alternatively, those interested in monitoring and optimizing their sleep patterns can use this insight to establish consistent and adequate sleep schedules.

In summary, the total average intensity graph reveals that the least intensities are observed during the hours of 22:00 to 05:00. Recognizing this pattern can help individuals make informed decisions regarding their daily routines, optimizing their activities, and ensuring sufficient rest for overall well-being.

###Suggestions for Bellabeat

Sleep Tracking and Optimization: Develop advanced sleep tracking features, providing personalized recommendations and optimizing sleep patterns based on the low intensity levels during late evening and early morning hours.

Activity and Exercise Planning: Offer personalized exercise recommendations during hours of higher intensity, helping users plan and optimize their workouts effectively.

Energy Management: Optimize battery usage during periods of low intensity to prolong battery life and enhance the overall user experience.

User Engagement and Motivation: Utilize gamification techniques to motivate users during hours of lower intensity, increasing engagement and encouraging an active lifestyle.

Personalized Recommendations: Provide tailored suggestions based on individual activity patterns, such as activity breaks during low-intensity hours or healthy snack recommendations during late-night periods.

By utilizing this information, the Bellabeat can enhance sleep tracking, activity planning, energy management, user engagement, and personalized recommendations in its smart devices and watches. This will improve the user experience and contribute to overall health and well-being.


Categories of users based on no. of steps per day

```{r}
# Define the categorization function
categorizeUser <- function(steps) {
  if (steps > 10000) {
    return("Very Active")
  } else if (steps >= 7000 && steps <= 10000) {
    return("Fairly Active")
  } else if (steps >= 3000 && steps < 7000) {
    return("Mildly Active")
  } else {
    return("Sedentary")
  }
}

# Apply the categorization function to create a new column
dailyActivity$UserCategory <- sapply(dailyActivity$TotalSteps, categorizeUser)

# View the updated dataset
head(dailyActivity)


```
Now visualise it

```{r}
# Load required library
library(ggplot2)

# Create a boxplot of Calories by UserCategory with different colors
ggplot(data = dailyActivity, aes(x = UserCategory, y = Calories, fill = UserCategory)) +
  geom_boxplot(color = "black") +
  labs(x = "User Category", y = "Calories", title = "Calories by User Category") +
  scale_fill_manual(values = c("Very Active" = "skyblue", "Fairly Active" = "pink",
                               "Mildly Active" = "lightgreen", "Sedentary" = "lightgray")) +
  theme_bw()


```
###Suggestions for Bellabeat
The insights from the boxplot chart comparing calories consumed across user categories (very active to sedentary) can be utilized to enhance the features of a smart device or smartwatch developed by Bella Beat. Here's how this information can be applied:

Activity Tracking and Goal Setting: Incorporate advanced activity tracking capabilities to accurately measure and monitor users' activity levels. By detecting and categorizing activity intensity, the device can provide real-time feedback to users, encouraging them to reach their personalized calorie consumption goals based on their activity category. This feature can help users track their progress and make adjustments to their lifestyle as needed.

Personalized Calorie Recommendations: Leverage the calorie consumption differences between user categories to offer personalized calorie recommendations. Based on the user's activity level and goals, the smart device can provide tailored suggestions for calorie intake, helping users maintain a healthy balance and achieve their desired fitness outcomes.

Nutrition Tracking and Guidance: Integrate a nutrition tracking feature that enables users to log their calorie intake easily. The smart device can provide insights into nutritional content, offer healthy food choices, and provide personalized recommendations based on the user's activity level and goals. This feature can assist users in making informed dietary decisions and maintaining a balanced calorie intake.

Energy Balance Monitoring: Use the calorie consumption data to calculate users' energy balance. By displaying the information in real-time, the smart device can help users understand the relationship between their activity levels and calorie intake. This knowledge can motivate users to make healthier choices and maintain a balanced energy balance throughout the day.

Reminders and Motivation: Utilize the calorie consumption differences across user categories to provide timely reminders and motivational messages. The smart device can send notifications or gentle nudges to encourage users to engage in physical activity or make healthy food choices based on their specific category. These reminders can help users stay on track and maintain a healthy lifestyle.

By leveraging the information from the boxplot chart, Bella Beat can enhance their smart device or smartwatch by integrating features like advanced activity tracking, personalized calorie recommendations, nutrition tracking and guidance, energy balance monitoring, and reminders for motivation. These additions will provide users with valuable insights and support to achieve their fitness and wellness goals.

SLeepdata 

```{r}
# Merge sleep data with daily activities data
merged_data <- merge(dailyActivity, sleep_Day, by = "Id")

# Print the merged data
str(merged_data)


```
Correlation Heatmap

```{r}
install.packages("ggcorrplot")

library(ggcorrplot)


correlation_matrix <- cor(merged_data[, c("TotalSteps", "TotalDistance", "VeryActiveMinutes", "FairlyActiveMinutes", "TotalMinutesAsleep", "TotalTimeInBed")])
ggcorrplot(correlation_matrix, type = "lower", lab = TRUE)


```
###Suggestions for Bellabeat

The correlation heat map provides valuable insights into the relationships between different data points. Based on the correlations mentioned, here's how Bella Beat can leverage this information to add important features to their smart device or smartwatch:

Sleep Tracking Optimization: Given the high correlation of 0.93 between total minutes asleep and total time in bed, Bella Beat can enhance their sleep tracking feature. By accurately measuring and analyzing sleep duration, the device can provide users with detailed insights into their sleep patterns and offer personalized recommendations for improving sleep quality.

Activity Monitoring Enhancement: The correlations between activity minutes (fairly active and very active) with total time in bed (-0.04) suggest that there may be an inverse relationship between these variables. Bella Beat can utilize this information to improve activity monitoring by distinguishing between active and restful periods. The device can provide notifications or reminders to encourage users to balance their activity levels and prioritize rest for better overall well-being.

Distance and Step Tracking Integration: With a strong positive correlation of 0.98 between total steps and total distance, Bella Beat can ensure accurate tracking of both metrics. By leveraging this relationship, the device can provide users with precise information about their daily steps and distance traveled, empowering them to set and achieve activity goals effectively.

Intensity-Based Activity Recommendations: The correlations between total distance and fairly active minutes (0.57) and very active minutes (0.59) indicate that greater distances are associated with more active minutes. Bella Beat can utilize this insight to offer personalized activity recommendations based on distance targets. The device can motivate users to reach specific distances to achieve their desired activity levels.

Activity Intensity Analysis: Considering the correlation of 0.31 between very active minutes and fairly active minutes, Bella Beat can introduce an activity intensity analysis feature. By assessing the balance between various activity intensities, the device can provide users with a comprehensive overview of their activity patterns and suggest adjustments to maintain a well-rounded fitness routine.

By incorporating these features based on the correlations observed in the heat map, Bella Beat can enhance the functionality and user experience of their smart device or smartwatch. This will provide users with more accurate sleep tracking, personalized activity recommendations, precise distance and step tracking, and insights into activity intensity, enabling them to make informed decisions and achieve their health and fitness goals effectively.

```{r}
setwd("/Users/muskan/Documents/Google Data Analytics Course Resources/R Programming/Google Course R")
```

